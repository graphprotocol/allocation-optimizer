<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Understanding The Output · The Allocation Optimizer</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://graphprotocol.github.io/allocation-optimizer/output/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">The Allocation Optimizer</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../configuration/">Configuration</a></li><li><span class="tocitem">Usage</span><ul><li><a class="tocitem" href="../provided-binary/">Using The Provided Binary</a></li><li><a class="tocitem" href="../build-a-binary/">Build Your Own Binary</a></li><li><a class="tocitem" href="../call-julia/">Calling From Julia</a></li><li><a class="tocitem" href="../calling-another/">Calling From Another Language</a></li></ul></li><li class="is-active"><a class="tocitem" href>Understanding The Output</a></li><li><a class="tocitem" href="../api/">API Reference</a></li><li><a class="tocitem" href="../bugs/">Reporting Bugs</a></li><li><a class="tocitem" href="../contributing/">Contributing</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Understanding The Output</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Understanding The Output</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/graphprotocol/allocation-optimizer/blob/main/docs/src/output.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Understanding-The-Output"><a class="docs-heading-anchor" href="#Understanding-The-Output">Understanding The Output</a><a id="Understanding-The-Output-1"></a><a class="docs-heading-anchor-permalink" href="#Understanding-The-Output" title="Permalink"></a></h1><p>After a successful run, the Allocation Optimizer will produce a JSON output in your <code>writedir</code> under the name <em>report.json</em>. Let&#39;s walk through how to read this file.</p><p>This report contains the various strategies that the Allocation Optimizer recommends based on the network state and your config file. The <code>num_reported_options</code> field in your config will determine the maximum number of outputs in the report.</p><p>Let&#39;s break down the following example <em>report.json</em></p><pre><code class="language-json hljs">{
    &quot;strategies&quot;: [
        {
            &quot;num_allocations&quot;:2,
            &quot;profit&quot;:229779.02830650925,
            &quot;allocations&quot;: [
                {
                    &quot;allocationAmount&quot;:&quot;13539706.9&quot;,
                    &quot;profit&quot;:169430.57951963632,
                    &quot;deploymentID&quot;:&quot;QmT2Y7SHXGRt7EKXzFPYMjnrgX64PQr86EjbsHoDLNzwLy&quot;
                },
                {
                    &quot;allocationAmount&quot;:&quot;9194401.2&quot;,
                    &quot;profit&quot;:60348.44878687295,
                    &quot;deploymentID&quot;:&quot;QmXT4PhR9pwAUqkxg6tgqR8xWUsTYN7V8UgmqhrrimcqXf&quot;
                }
            ]
        },
        {
            &quot;num_allocations&quot;:1,
            &quot;profit&quot;:190114.2718246217,
            &quot;allocations&quot;: [
                {
                    &quot;allocationAmount&quot;:&quot;22734108.1&quot;,
                    &quot;profit&quot;:190114.2718246217,
                    &quot;deploymentID&quot;:&quot;QmT2Y7SHXGRt7EKXzFPYMjnrgX64PQr86EjbsHoDLNzwLy&quot;
                }
            ]
        }
    ]
}</code></pre><p>which the Optimizer generated from the following config.</p><pre><code class="language-toml hljs">id = &quot;0xd75c4dbcb215a6cf9097cfbcc70aab2596b96a9c&quot;
writedir = &quot;data&quot;
readdir = &quot;data&quot;
max_allocations = 2
whitelist = []
blacklist = []
frozenlist = []
pinnedlist = []
allocation_lifetime = 28
gas = 100
min_signal = 1000
verbose = true
num_reported_options = 2
execution_mode = &quot;rules&quot;</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>If you use this same config, you could get a slightly different report depending on the network state.</p></div></div><p>The JSON has two <code>strategies</code>. They are sorted by the one with the highest expected profit appearing first. In the first one here, we have two allocations, which you could see from the <code>num_allocations</code> field, or by counting the number of entries under the <code>allocations</code> field. At the top level of each strategy, <code>profit</code> describes the total expected profit in GRT for all allocations.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Notice in the config file that our allocation lifetime was 28 epochs. The profit is over that lifetime. However, it is impossible for us to know how the network state will evolve in the future. All results from the Optimizer assume that the network state will remain static. As a result, you should take these numbers with a grain of salt and use your knowledge as an indexer to determine whether the Optimizer&#39;s strategy could be tweaked in your favour.</p></div></div><p>Then, we go into the <code>allocations</code>. Each entry in this list contains the amount of GRT the strategy wants you to stake, the expected profit of this allocation, and the subgraph deployment ID onto which you should make this allocation.</p><p>In addition to the <em>report.json</em>, since we specified <code>execution_mode</code> as <code>&quot;rules&quot;</code> in the config, the Optimizer will print out indexer rules that you can run to execute the best strategy. In our case,</p><pre><code class="language-bash hljs">graph indexer rules stop QmNoe4VQFSKAC3uiq48UQASg4QeqFVSKYYGwnxNjNi6GYX
graph indexer rules stop QmRDGLp6BHwiH9HAE2NYEE3f7LrKuRqziHBv76trT4etgU
graph indexer rules stop QmUVskWrz1ZiQZ76AtyhcfFDEH1ELnRpoyEhVL8p6NFTbR
graph indexer rules stop QmXZiV6S13ha6QXq4dmaM3TB4CHcDxBMvGexSNu9Kc28EH
graph indexer rules stop QmYN4ofRb5CUg1WdpLhhNTVCuiiAt29hBKGjTnnxYh9zYt
graph indexer rules stop Qmaz1R8vcv9v3gUfksqiS9JUz7K9G8S5By3JYn8kTiiP5K
graph indexer rules stop QmcBSr5R3K2M5tk8qeHFaX8pxAhdViYhcKD8ZegYuTcUhC
graph indexer rules set QmT2Y7SHXGRt7EKXzFPYMjnrgX64PQr86EjbsHoDLNzwLy decisionBasis always allocationAmount 13539706.9
graph indexer rules set QmXT4PhR9pwAUqkxg6tgqR8xWUsTYN7V8UgmqhrrimcqXf decisionBasis always allocationAmount 9194401.2</code></pre><p>If instead you use <code>&quot;actionqueue&quot;</code> as the <code>execution_mode</code>, the Optimizer will populate your instance of the action queue.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../calling-another/">« Calling From Another Language</a><a class="docs-footer-nextpage" href="../api/">API Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Thursday 24 August 2023 19:34">Thursday 24 August 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
